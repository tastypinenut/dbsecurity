<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="xyz.tpn.dbsecurity.demo.dal.mapper.UserInfoMapper">
    <resultMap id="BaseResultMap" type="xyz.tpn.dbsecurity.demo.dal.model.UserInfo">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Dec 23 09:40:15 CST 2016.
        -->
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="name" jdbcType="VARCHAR" property="name"/>
        <result column="bank_card_no" jdbcType="VARCHAR" property="bankCardNo"/>
        <result column="type" jdbcType="VARCHAR" property="type"/>
        <result column="phone" jdbcType="VARCHAR" property="phone"/>
    </resultMap>

    <select id="selectAll" resultMap="BaseResultMap">
    select * from t_user_info i
    </select>

    <select id="joinSelectAll" resultMap="BaseResultMap">
        select i.*,l.phone from t_user_info i, t_loan_info l where i.id=l.user_id
    </select>

    <select id="selectByName" resultMap="BaseResultMap" parameterType="java.lang.String">
    select * from t_user_info i where name=#{name}
  </select>

    <select id="selectById" resultMap="BaseResultMap" parameterType="java.lang.Integer">
    select * from t_user_info i where id=#{id}
  </select>

    <select id="selectByType" resultMap="BaseResultMap" parameterType="java.lang.String">
    select * from t_user_info i where type=#{type}
  </select>

    <insert id="insert" parameterType="xyz.tpn.dbsecurity.demo.dal.model.UserInfo">
    insert into t_user_info(id, name, bank_card_no, type) values(#{id}, #{name}, #{bankCardNo}, #{type})
  </insert>

    <insert id="insertBatch" parameterType="xyz.tpn.dbsecurity.demo.dal.model.UserInfo">
    insert into t_user_info(id, name, bank_card_no, type) values
        <foreach collection="list" item="userInfo" index="index"
                 open="" close="" separator=",">
            (#{userInfo.id}, #{userInfo.name}, #{userInfo.bankCardNo}, #{userInfo.type})
        </foreach>

    </insert>

    <update id="updateById" parameterType="xyz.tpn.dbsecurity.demo.dal.model.UserInfo">
    update t_user_info set name= #{name}, bank_card_no = #{bankCardNo},type='type'  where id=#{id}
  </update>

    <update id="updateByName" parameterType="xyz.tpn.dbsecurity.demo.dal.model.UserInfo">
    update t_user_info set bank_card_no = #{bankCardNo}, type='type' where name= #{name}
  </update>

    <update id="updateUserInfoByName">
    update t_user_info set bank_card_no = #{user.bankCardNo}, type=#{user.type} where name= #{name}
  </update>

    <delete id="deleteAll">
    delete from t_user_info
  </delete>


</mapper>